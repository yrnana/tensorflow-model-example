import{z as p1,T as O,g as F,p as T1,q as F1,u as O1,bQ as t2,d as _,i as q,e as K,w as D1,v as e1,t as i1,k as G,h as D,f as x,m as S,o as m1,l as S1,n as n2,r as t1}from"./vendor.a4162548.js";import{l as Y}from"./graph_model.6c4c3382.js";import{d as r2,s as o2,V as i2}from"./canvas.77fa6c83.js";import{a as s2,j as U1}from"./index.65c1c8a9.js";/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var v1=function(){return(v1=Object.assign||function(e){for(var n,o=1,r=arguments.length;o<r;o++)for(var t in n=arguments[o])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}).apply(this,arguments)};function U(e,n,o,r){return new(o||(o=Promise))(function(t,h){function s(u){try{c(r.next(u))}catch(i){h(i)}}function a(u){try{c(r.throw(u))}catch(i){h(i)}}function c(u){var i;u.done?t(u.value):(i=u.value,i instanceof o?i:new o(function(l){l(i)})).then(s,a)}c((r=r.apply(e,n||[])).next())})}function z(e,n){var o,r,t,h,s={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return h={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function a(c){return function(u){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(t=s.trys,!((t=t.length>0&&t[t.length-1])||i[0]!==6&&i[0]!==2)){s=0;continue}if(i[0]===3&&(!t||i[1]>t[0]&&i[1]<t[3])){s.label=i[1];break}if(i[0]===6&&s.label<t[1]){s.label=t[1],t=i;break}if(t&&s.label<t[2]){s.label=t[2],s.ops.push(i);break}t[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(l){i=[6,l],r=0}finally{o=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([c,u])}}}function Q(e,n,o,r){return new(o||(o=Promise))(function(t,h){function s(u){try{c(r.next(u))}catch(i){h(i)}}function a(u){try{c(r.throw(u))}catch(i){h(i)}}function c(u){var i;u.done?t(u.value):(i=u.value,i instanceof o?i:new o(function(l){l(i)})).then(s,a)}c((r=r.apply(e,n||[])).next())})}function X(e,n){var o,r,t,h,s={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return h={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function a(c){return function(u){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(t=(t=s.trys).length>0&&t[t.length-1])&&(i[0]===6||i[0]===2)){s=0;continue}if(i[0]===3&&(!t||i[1]>t[0]&&i[1]<t[3])){s.label=i[1];break}if(i[0]===6&&s.label<t[1]){s.label=t[1],t=i;break}if(t&&s.label<t[2]){s.label=t[2],s.ops.push(i);break}t[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(l){i=[6,l],r=0}finally{o=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([c,u])}}}var z1=function(e){return{startEndTensor:e,startPoint:x(e,[0,0],[-1,2]),endPoint:x(e,[0,2],[-1,2])}},a2={strides:[8,16],anchors:[2,6]};function W1(e,n){var o,r,t;if(e.topLeft instanceof O&&e.bottomRight instanceof O){var h=F(function(){return[e1([x(D(n-1,e.topLeft),0,1),x(e.topLeft,1,1)]),e1([D(n-1,x(e.bottomRight,0,1)),x(e.bottomRight,1,1)])]});o=h[0],r=h[1],e.landmarks!=null&&(t=F(function(){var d=D(_([n-1,0]),e.landmarks),g=_([1,-1]);return S(d,g)}))}else{var s=e.topLeft,a=s[0],c=s[1],u=e.bottomRight,i=u[0],l=u[1];o=[n-1-a,c],r=[n-1-i,l],e.landmarks!=null&&(t=e.landmarks.map(function(d){return[n-1-d[0],d[1]]}))}var f={topLeft:o,bottomRight:r};return t!=null&&(f.landmarks=t),e.probability!=null&&(f.probability=e.probability instanceof O?e.probability.clone():e.probability),f}function j1(e,n){return F(function(){var o;return o=e.hasOwnProperty("box")?e.box:e,G(function(r,t){var h=S(r.startPoint,t),s=S(r.endPoint,t),a=S1([h,s],1);return z1(a)}(o,n).startEndTensor)})}var c2=function(){function e(n,o,r,t,h,s){this.blazeFaceModel=n,this.width=o,this.height=r,this.maxFaces=t,this.anchorsData=function(a,c,u){for(var i=[],l=0;l<u.strides.length;l++)for(var f=u.strides[l],d=Math.floor((c+f-1)/f),g=Math.floor((a+f-1)/f),v=u.anchors[l],p=0;p<d;p++)for(var b=f*(p+.5),m=0;m<g;m++)for(var w=f*(m+.5),y=0;y<v;y++)i.push([w,b]);return i}(o,r,a2),this.anchors=i1(this.anchorsData),this.inputSizeData=[o,r],this.inputSize=_([o,r]),this.iouThreshold=h,this.scoreThreshold=s}return e.prototype.getBoundingBoxes=function(n,o,r){return r===void 0&&(r=!0),Q(this,void 0,void 0,function(){var t,h,s,a,c,u,i,l,f,d,g,v,p,b,m=this;return X(this,function(w){switch(w.label){case 0:return t=F(function(){var y=q.resizeBilinear(n,[m.width,m.height]),E=S(D(K(y,255),.5),2),k=m.blazeFaceModel.predict(E),L=G(k),P=function(C,I,T){var R=x(C,[0,1],[-1,2]),N=m1(R,I),j=x(C,[0,3],[-1,2]),$=K(j,T),H=K(N,T),A=K($,2),Z=D(H,A),r1=m1(H,A),l1=S(Z,T),d1=S(r1,T);return S1([l1,d1],1)}(L,m.anchors,m.inputSize),M=x(L,[0,0],[-1,1]);return[L,P,G(n2(M))]}),h=t[0],s=t[1],a=t[2],c=console.warn,console.warn=function(){},u=q.nonMaxSuppression(s,a,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=c,[4,u.array()];case 1:return i=w.sent(),u.dispose(),l=i.map(function(y){return x(s,[y,0],[1,-1])}),o?[3,3]:[4,Promise.all(l.map(function(y){return Q(m,void 0,void 0,function(){var E;return X(this,function(k){switch(k.label){case 0:return[4,y.array()];case 1:return E=k.sent(),y.dispose(),[2,E]}})})}))];case 2:l=w.sent(),w.label=3;case 3:for(f=n.shape[1],d=n.shape[2],g=o?K([d,f],this.inputSize):[d/this.inputSizeData[0],f/this.inputSizeData[1]],v=[],p=function(y){var E=l[y],k=F(function(){var L=z1(E instanceof O?E:i1(E));if(!r)return L;var P,M=i[y];return P=o?x(m.anchors,[M,0],[1,2]):m.anchorsData[M],{box:L,landmarks:D1(G(x(h,[M,5],[1,-1])),[6,-1]),probability:x(a,[M],[1]),anchor:P}});v.push(k)},b=0;b<l.length;b++)p(b);return s.dispose(),a.dispose(),h.dispose(),[2,{boxes:v,scaleFactor:g}]}})})},e.prototype.estimateFaces=function(n,o,r,t){return o===void 0&&(o=!1),r===void 0&&(r=!1),t===void 0&&(t=!0),Q(this,void 0,void 0,function(){var h,s,a,c,u,i,l=this;return X(this,function(f){switch(f.label){case 0:return h=function(d){return d instanceof O?[d.shape[0],d.shape[1]]:[d.height,d.width]}(n),s=h[1],a=F(function(){return n instanceof O||(n=T1(n)),F1(O1(n,"float32"),0)}),[4,this.getBoundingBoxes(a,o,t)];case 1:return c=f.sent(),u=c.boxes,i=c.scaleFactor,a.dispose(),o?[2,u.map(function(d){var g=j1(d,i),v={topLeft:x(g,[0],[2]),bottomRight:x(g,[2],[2])};if(t){var p=d,b=p.landmarks,m=p.probability,w=p.anchor,y=S(m1(b,w),i);v.landmarks=y,v.probability=m}return r&&(v=W1(v,s)),v})]:[2,Promise.all(u.map(function(d){return Q(l,void 0,void 0,function(){var g,v,p,b,m,w,y,E,k,L,P,M=this;return X(this,function(C){switch(C.label){case 0:return g=j1(d,i),t?[3,2]:[4,g.array()];case 1:return m=C.sent(),v={topLeft:m.slice(0,2),bottomRight:m.slice(2)},[3,4];case 2:return[4,Promise.all([d.landmarks,g,d.probability].map(function(I){return Q(M,void 0,void 0,function(){return X(this,function(T){return[2,I.array()]})})}))];case 3:p=C.sent(),b=p[0],m=p[1],w=p[2],y=d.anchor,k=(E=i)[0],L=E[1],P=b.map(function(I){return[(I[0]+y[0])*k,(I[1]+y[1])*L]}),v={topLeft:m.slice(0,2),bottomRight:m.slice(2),landmarks:P,probability:w},function(I){I.startEndTensor.dispose(),I.startPoint.dispose(),I.endPoint.dispose()}(d.box),d.landmarks.dispose(),d.probability.dispose(),C.label=4;case 4:return g.dispose(),r&&(v=W1(v,s)),[2,v]}})})}))]}})})},e}();function u2(e){var n=e===void 0?{}:e,o=n.maxFaces,r=o===void 0?10:o,t=n.inputWidth,h=t===void 0?128:t,s=n.inputHeight,a=s===void 0?128:s,c=n.iouThreshold,u=c===void 0?.3:c,i=n.scoreThreshold,l=i===void 0?.75:i,f=n.modelUrl;return Q(this,void 0,void 0,function(){var d;return X(this,function(g){switch(g.label){case 0:return f==null?[3,2]:[4,Y(f)];case 1:return d=g.sent(),[3,4];case 2:return[4,Y("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:d=g.sent(),g.label=4;case 4:return[2,new c2(d,h,a,r,u,l)]}})})}var W={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function s1(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function a1(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function g1(e,n){n===void 0&&(n=1.5);var o=a1(e),r=s1(e),t=[n*r[0]/2,n*r[1]/2];return{startPoint:[o[0]-t[0],o[1]-t[1]],endPoint:[o[0]+t[0],o[1]+t[1]],landmarks:e.landmarks}}function y1(e){var n=a1(e),o=s1(e),r=Math.max.apply(Math,o)/2;return{startPoint:[n[0]-r,n[1]-r],endPoint:[n[0]+r,n[1]+r],landmarks:e.landmarks}}var h2=[[1,0,0],[0,1,0],[0,0,1]];function l2(e,n){var o,r=Math.PI/2-Math.atan2(-(n[1]-e[1]),n[0]-e[0]);return(o=r)-2*Math.PI*Math.floor((o+Math.PI)/(2*Math.PI))}function H1(e,n){return[[1,0,e],[0,1,n],[0,0,1]]}function V(e,n){for(var o=0,r=0;r<e.length;r++)o+=e[r]*n[r];return o}function d2(e,n){for(var o=[],r=0;r<e.length;r++)o.push(e[r][n]);return o}function A1(e,n){for(var o=[],r=e.length,t=0;t<r;t++){o.push([]);for(var h=0;h<r;h++)o[t].push(V(e[t],d2(n,h)))}return o}function N1(e,n){var o=Math.cos(e),r=Math.sin(e),t=[[o,-r,0],[r,o,0],[0,0,1]],h=A1(H1(n[0],n[1]),t);return A1(h,H1(-n[0],-n[1]))}var _1=[13,W.midwayBetweenEyes[0]],G1=[3,2],b1=W.leftEyeLower0,P1=[b1[0],b1[b1.length-1]],w1=W.rightEyeLower0,x1=[w1[0],w1[w1.length-1]],V1=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function c1(e,n,o,r){for(var t=0;t<V1.length;t++){var h=V1[t],s=h.key,a=h.indices,c=W[""+o+s];if(r==null||r.includes(s))for(var u=0;u<a.length;u++){var i=a[u];e[c[u]]=[n[i][0],n[i][1],(n[i][2]+e[c[u]][2])/2]}}}var f2=function(){function e(n,o,r,t,h,s,a){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=n,this.meshDetector=o,this.irisModel=a,this.meshWidth=r,this.meshHeight=t,this.maxContinuousChecks=h,this.maxFaces=s}return e.prototype.transformRawCoords=function(n,o,r,t){var h,s,a,c,u=this,i=s1({startPoint:o.startPoint,endPoint:o.endPoint}),l=[i[0]/this.meshWidth,i[1]/this.meshHeight],f=n.map(function(m){return[l[0]*(m[0]-u.meshWidth/2),l[1]*(m[1]-u.meshHeight/2),m[2]]}),d=N1(r,[0,0]),g=f.map(function(m){return function(w,y){return[V(w,y[0]),V(w,y[1])]}(m,d).concat([m[2]])}),v=(s=[[(h=t)[0][0],h[1][0]],[h[0][1],h[1][1]]],a=[h[0][2],h[1][2]],c=[-V(s[0],a),-V(s[1],a)],[s[0].concat(c[0]),s[1].concat(c[1]),[0,0,1]]),p=a1({startPoint:o.startPoint,endPoint:o.endPoint}).concat([1]),b=[V(p,v[0]),V(p,v[1])];return g.map(function(m){return[m[0]+b[0],m[1]+b[1],m[2]]})},e.prototype.getLeftToRightEyeDepthDifference=function(n){return n[P1[0]][2]-n[x1[0]][2]},e.prototype.getEyeBox=function(n,o,r,t,h){h===void 0&&(h=!1);var s=y1(g1(this.calculateLandmarksBoundingBox([n[r],n[t]]),2.3)),a=s1(s),c=q.cropAndResize(o,[[s.startPoint[1]/this.meshHeight,s.startPoint[0]/this.meshWidth,s.endPoint[1]/this.meshHeight,s.endPoint[0]/this.meshWidth]],[0],[64,64]);return h&&(c=q.flipLeftRight(c)),{box:s,boxSize:a,crop:c}},e.prototype.getEyeCoords=function(n,o,r,t){t===void 0&&(t=!1);for(var h=[],s=0;s<76;s++){var a=n[3*s],c=n[3*s+1],u=n[3*s+2];h.push([(t?1-a/64:a/64)*r[0]+o.startPoint[0],c/64*r[1]+o.startPoint[1],u])}return{rawCoords:h,iris:h.slice(71)}},e.prototype.getAdjustedIrisCoords=function(n,o,r){var t=n[W[r+"EyeUpper0"][3]][2],h=n[W[r+"EyeLower0"][4]][2],s=(t+h)/2;return o.map(function(a,c){var u=s;return c===2?u=t:c===4&&(u=h),[a[0],a[1],u]})},e.prototype.predict=function(n,o){return U(this,void 0,void 0,function(){var r,t,h,s,a=this;return z(this,function(c){switch(c.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(n,!1,!0)]:[3,2];case 1:return r=c.sent(),t=r.boxes,h=r.scaleFactor,t.length===0?(this.regionsOfInterest=[],[2,null]):(s=t.map(function(u){var i,l,f={startPoint:G(u.box.startPoint).arraySync(),endPoint:G(u.box.endPoint).arraySync()},d=y1(g1((l=h,{startPoint:[(i=f).startPoint[0]*l[0],i.startPoint[1]*l[1]],endPoint:[i.endPoint[0]*l[0],i.endPoint[1]*l[1]]})));return v1({},d,{landmarks:u.landmarks.arraySync()})}),t.forEach(function(u){u!=null&&u.startPoint!=null&&(u.startEndTensor.dispose(),u.startPoint.dispose(),u.endPoint.dispose())}),this.updateRegionsOfInterest(s),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,c.label=3;case 3:return[2,F(function(){return a.regionsOfInterest.map(function(u,i){var l,f=u.landmarks.length>=468,d=_1[0],g=_1[1];f===!1&&(d=G1[0],g=G1[1]),l=l2(u.landmarks[d],u.landmarks[g]);var v=a1({startPoint:u.startPoint,endPoint:u.endPoint}),p=[v[0]/n.shape[2],v[1]/n.shape[1]],b=n,m=h2;l!==0&&(b=q.rotateWithOffset(n,l,0,p),m=N1(-l,v));var w={startPoint:u.startPoint,endPoint:u.endPoint},y=K(function(o1,f1,Z1){var R1=f1.shape[1],B1=f1.shape[2],e2=[[o1.startPoint[1]/R1,o1.startPoint[0]/B1,o1.endPoint[1]/R1,o1.endPoint[0]/B1]];return q.cropAndResize(f1,e2,[0],Z1,"bilinear",0)}(w,b,[a.meshHeight,a.meshWidth]),255),E=a.meshDetector.predict(y),k=E[1],L=E[2],P=D1(L,[-1,3]).arraySync();if(o){var M=a.getEyeBox(P,y,P1[0],P1[1],!0),C=M.box,I=M.boxSize,T=M.crop,R=a.getEyeBox(P,y,x1[0],x1[1]),N=R.box,j=R.boxSize,$=R.crop,H=a.irisModel.predict(e1([T,$])).dataSync(),A=H.slice(0,228),Z=a.getEyeCoords(A,C,I,!0),r1=Z.rawCoords,l1=Z.iris,d1=H.slice(228),E1=a.getEyeCoords(d1,N,j),k1=E1.rawCoords,Q1=E1.iris,M1=a.getLeftToRightEyeDepthDifference(P);Math.abs(M1)<30?(c1(P,r1,"left"),c1(P,k1,"right")):M1<1?c1(P,r1,"left",["EyeUpper0","EyeLower0"]):c1(P,k1,"right",["EyeUpper0","EyeLower0"]);var X1=a.getAdjustedIrisCoords(P,l1,"left"),J1=a.getAdjustedIrisCoords(P,Q1,"right");P=P.concat(X1).concat(J1)}var L1=a.transformRawCoords(P,u,l,m),I1=i1(L1),C1=g1(a.calculateLandmarksBoundingBox(L1)),$1=y1(C1);return a.regionsOfInterest[i]=v1({},$1,{landmarks:I1.arraySync()}),{coords:i1(P,[P.length,3]),scaledCoords:I1,box:C1,flag:G(k)}})})]}})})},e.prototype.updateRegionsOfInterest=function(n){for(var o=0;o<n.length;o++){var r=n[o],t=this.regionsOfInterest[o],h=0;if(t&&t.startPoint){var s=r.startPoint,a=s[0],c=s[1],u=r.endPoint,i=u[0],l=u[1],f=t.startPoint,d=f[0],g=f[1],v=t.endPoint,p=v[0],b=v[1],m=Math.max(a,d),w=Math.max(c,g),y=(Math.min(i,p)-m)*(Math.min(l,b)-w);h=y/((i-a)*(l-c)+(p-d)*(b-c)-y)}h<.25&&(this.regionsOfInterest[o]=r)}this.regionsOfInterest=this.regionsOfInterest.slice(0,n.length)},e.prototype.clearRegionOfInterest=function(n){this.regionsOfInterest[n]!=null&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,n).concat(this.regionsOfInterest.slice(n+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var n=this.regionsOfInterest.length,o=n===0;return this.maxFaces===1||o?o:n!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(n){var o=n.map(function(t){return t[0]}),r=n.map(function(t){return t[1]});return{startPoint:[Math.min.apply(Math,o),Math.min.apply(Math,r)],endPoint:[Math.max.apply(Math,o),Math.max.apply(Math,r)]}},e}(),p2=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function m2(e){return U(this,void 0,void 0,function(){var n,o,r,t,h,s,a,c,u,i,l,f,d,g,v,p;return z(this,function(b){switch(b.label){case 0:return n=e.maxContinuousChecks,o=n===void 0?5:n,r=e.detectionConfidence,t=r===void 0?.9:r,h=e.maxFaces,s=h===void 0?10:h,a=e.iouThreshold,c=a===void 0?.3:a,u=e.scoreThreshold,i=u===void 0?.75:u,l=e.shouldLoadIrisModel,f=l===void 0||l,d=e.modelUrl,g=e.detectorModelUrl,v=e.irisModelUrl,f?[4,Promise.all([q1(g,s,c,i),K1(d),v2(v)])]:[3,2];case 1:return p=b.sent(),[3,4];case 2:return[4,Promise.all([q1(g,s,c,i),K1(d)])];case 3:p=b.sent(),b.label=4;case 4:return[2,new g2(p[0],p[1],o,t,s,f?p[2]:null)]}})})}function q1(e,n,o,r){return U(this,void 0,void 0,function(){return z(this,function(t){return[2,u2({modelUrl:e,maxFaces:n,iouThreshold:o,scoreThreshold:r})]})})}function K1(e){return U(this,void 0,void 0,function(){return z(this,function(n){return e!=null?[2,Y(e)]:[2,Y("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]})})}function v2(e){return U(this,void 0,void 0,function(){return z(this,function(n){return e!=null?[2,Y(e)]:[2,Y("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]})})}function Y1(e,n){if(e.mesh instanceof O){var o=F(function(){var a=_([n-1,0,0]),c=_([1,-1,1]);return F(function(){return[e1([D(n-1,x(e.boundingBox.topLeft,0,1)),x(e.boundingBox.topLeft,1,1)]),e1([D(n-1,x(e.boundingBox.bottomRight,0,1)),x(e.boundingBox.bottomRight,1,1)]),S(D(a,e.mesh),c),S(D(a,e.scaledMesh),c)]})}),r=o[0],t=o[1],h=o[2],s=o[3];return Object.assign({},e,{boundingBox:{topLeft:r,bottomRight:t},mesh:h,scaledMesh:s})}return Object.assign({},e,{boundingBox:{topLeft:[n-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[n-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map(function(a){var c=a.slice(0);return c[0]=n-1-a[0],c}),scaledMesh:e.scaledMesh.map(function(a){var c=a.slice(0);return c[0]=n-1-a[0],c})})}var n1,g2=function(){function e(n,o,r,t,h,s){this.kind="MediaPipeFaceMesh",this.pipeline=new f2(n,o,192,192,r,h,s),this.detectionConfidence=t}return e.getAnnotations=function(){return W},e.getUVCoords=function(){return p2},e.prototype.estimateFaces=function(n){return U(this,void 0,void 0,function(){var o,r,t,h,s,a,c,u,i,l,f,d,g=this;return z(this,function(v){switch(v.label){case 0:if(o=n.returnTensors,r=o!==void 0&&o,t=n.flipHorizontal,h=t!==void 0&&t,s=n.predictIrises,a=s===void 0||s,c=n.input,a&&this.pipeline.irisModel==null)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return u=function(p){return p instanceof O?[p.shape[0],p.shape[1]]:[p.height,p.width]}(c),i=u[1],l=F(function(){return c instanceof O||(c=T1(c)),F1(O1(c,"float32"),0)}),t2()!=="webgl"?[3,2]:(d=p1().get("WEBGL_PACK_DEPTHWISECONV"),p1().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(l,a)]);case 1:return f=v.sent(),p1().set("WEBGL_PACK_DEPTHWISECONV",d),[3,4];case 2:return[4,this.pipeline.predict(l,a)];case 3:f=v.sent(),v.label=4;case 4:return l.dispose(),f!=null&&f.length>0?[2,Promise.all(f.map(function(p,b){return U(g,void 0,void 0,function(){var m,w,y,E,k,L,P,M,C,I,T,R,N,j,$=this;return z(this,function(H){switch(H.label){case 0:return m=p.coords,w=p.scaledCoords,y=p.box,E=p.flag,k=[E],r||(k=k.concat([m,w])),[4,Promise.all(k.map(function(A){return U($,void 0,void 0,function(){return z(this,function(Z){return[2,A.array()]})})}))];case 1:if(L=H.sent(),P=L[0],E.dispose(),P<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(b),r)return M={kind:"MediaPipePredictionTensors",faceInViewConfidence:P,mesh:m,scaledMesh:w,boundingBox:{topLeft:_(y.startPoint),bottomRight:_(y.endPoint)}},h?[2,Y1(M,i)]:[2,M];for(j in C=L.slice(1),I=C[0],T=C[1],w.dispose(),m.dispose(),R={kind:"MediaPipePredictionValues",faceInViewConfidence:P,boundingBox:{topLeft:y.startPoint,bottomRight:y.endPoint},mesh:I,scaledMesh:T},h&&(R=Y1(R,i)),N={},W)(a||j.includes("Iris")===!1)&&(N[j]=W[j].map(function(A){return R.scaledMesh[A]}));return R.annotations=N,[2,R]}})})}))]:[2,[]]}})})},e}();function y2(e,n){return e===void 0&&(e=n1.mediapipeFacemesh),n===void 0&&(n={}),U(this,void 0,void 0,function(){return z(this,function(o){if(e===n1.mediapipeFacemesh)return[2,m2(n)];throw new Error(e+" is not a valid package name.")})})}(function(e){e.mediapipeFacemesh="mediapipe-facemesh"})(n1||(n1={}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],B=468,J=5,b2="#32ee51",P2="#FF2C35",M2=()=>{const e=t1.exports.useRef(null),n=t1.exports.useRef(null),o=t1.exports.useRef(),r=t1.exports.useCallback(async()=>{const h=o.current,s=e.current,a=n.current,c=a==null?void 0:a.getContext("2d");if(!h||!s||!a||!c)return;const u=await h.estimateFaces({input:s,returnTensors:!1,flipHorizontal:!0,predictIrises:!0});u.length>0&&(c.clearRect(0,0,a.width,a.height),u.forEach(i=>{const l=i.scaledMesh;c.strokeStyle=b2,c.lineWidth=.5;for(let f=0;f<u1.length/3;f++){const d=[u1[f*3],u1[f*3+1],u1[f*3+2]].map(g=>l[g]);r2(c,d,!0)}if(l.length>B){c.strokeStyle=P2,c.lineWidth=1;const f=l[B],d=h1(l[B+4],l[B+2]),g=h1(l[B+3],l[B+1]);if(c.beginPath(),c.ellipse(f[0],f[1],g/2,d/2,0,0,2*Math.PI),c.stroke(),l.length>B+J){const v=l[B+J],p=h1(l[B+J+2],l[B+J+4]),b=h1(l[B+J+3],l[B+J+1]);c.beginPath(),c.ellipse(v[0],v[1],b/2,p/2,0,0,2*Math.PI),c.stroke()}}})),requestAnimationFrame(r)},[]),t=t1.exports.useCallback(async()=>{const h=e.current,s=n.current;!h||!s||(o2(h,s),o.current=await y2(n1.mediapipeFacemesh,{maxFaces:1}),requestAnimationFrame(r))},[r]);return s2("div",{className:"relative",children:[U1(i2,{ref:e,onLoadedMetadata:t}),U1("canvas",{ref:n,className:"absolute top-0 left-0"})]})};function h1(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}export{M2 as default};
//# sourceMappingURL=FaceLandmarksDetection.287cc811.js.map
